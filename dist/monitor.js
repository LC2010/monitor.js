define("alipay/monitor/2.1.0/monitor",["arale/detector/1.2.1/detector"],function(a,b,c){function d(a){return Object.prototype.toString.call(a)}function e(a){var b;if(null===a)return null;switch(d(a)){case"[object String]":case"object Number":case"[object Boolean]":b=a;break;case"[object Array]":b=[];for(var c=a.length-1;c>=0;c--)b[c]=e(a[c]);break;case"[object RegExp]":b=new RegExp(a.source,(a.ignoreCase?"i":"")+(a.global?"g":"")+(a.multiline?"m":""));break;case"[object Date]":b=new Date(a.valueOf());break;case"[object Error]":a=b;break;case"[object Object]":b={};for(var f in a)k(a,f)&&(b[f]=e(a[f]));break;default:throw new Error("Not support the type.")}return b}function f(a,b){if(!b)return a;for(var c in b)k(b,c)&&(a[c]=b[c]);return a}function g(){return(""+Math.random()).slice(-6)}function h(a){if(void 0===a||"string"!=typeof a)return"";var b=a.length,c=a.indexOf(";jsessionid=");0>c&&(c=b);var d=a.indexOf("/min/?");d>=0&&(d=a.indexOf("?",d)),0>d&&(d=b);var e=a.indexOf("#");0>e&&(e=b);var f=a.indexOf("??");f=a.indexOf("?",0>f?0:f+2),0>f&&(f=b);var g=Math.min(c,d,e,f);return 0>g?a:a.substr(0,g)}function i(a){return String(a).replace(/(?:\r\n|\r|\n)/g,"<CR>")}function j(a){if("[object Object]"!==Object.prototype.toString.call(a))return"";var b=[];for(var c in a)if(k(a,c))if("[object Array]"===d(a[c]))for(var e=0,f=a[c].length;f>e;e++)b.push(c+"="+encodeURIComponent(i(a[c][e])));else b.push(c+"="+encodeURIComponent(i(a[c])));return b.join("&")}function k(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function l(a,b,c){if(c||(c=function(){}),!b)return c();var d=j(b),e=a+(a.indexOf("?")<0?"?":"&")+d;if(e.length>u)return c();var f=new Image(1,1);f.onload=f.onerror=f.onabort=function(){c(),f.onload=f.onerror=f.onabort=null,f=null},f.src=e}function m(){if(w&&!y){var a=q._DATAS.shift();if(a){y=!0;var b=e(x);"jserror"===a.profile&&(a.file=h(a.file)),b=f(b,a),b.rnd=g(),l(t,b,function(){y=!1,m()})}}}var n=window,o=document,p=window.location,q=n.monitor;n.monitor||(q=window.monitor={},q._DATAS=[]);var r=a("arale/detector/1.2.1/detector"),s="2.0",t="https://magentmng.alipay.com/m.gif",u=r.engine.trident?2083:8190,v=h(p.href),w=!1,x={url:v,ref:h(o.referrer)||"-",clnt:r.device.name+"/"+r.device.fullVersion+"|"+r.os.name+"/"+r.os.fullVersion+"|"+r.browser.name+"/"+r.browser.fullVersion+"|"+r.engine.name+"/"+r.engine.fullVersion+(r.browser.compatible?"|c":""),v:s},y=!1,z=q._DATAS.push;q._DATAS.push=function(){z.apply(q._DATAS,arguments),m()},q.boot=function(a){w=a!==!1},window.monitor=q,c.exports=q});
